(()=>{"use strict";var e={596:(e,t,s)=>{s.r(t)},76:(e,t,s)=>{s.r(t)},5080:(e,t,s)=>{s.r(t)},7262:(e,t,s)=>{s.r(t)},4336:(e,t,s)=>{s.r(t)},5528:(e,t,s)=>{s.r(t)},6220:(e,t,s)=>{s.r(t)},7925:(e,t,s)=>{s.r(t)},2051:(e,t,s)=>{s.r(t)},616:(e,t,s)=>{s.r(t)},9160:(e,t,s)=>{s.r(t)},6003:(e,t,s)=>{s.r(t)},6148:(e,t,s)=>{s.r(t)},2580:(e,t,s)=>{s.r(t)},8387:(e,t,s)=>{s.r(t)},6752:(e,t,s)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.App=void 0;const n=s(7054),i=s(8229),o=s(1366),r=s(2295),a=s(8831),l=s(3440),c=new Map([["/",()=>(new i.Game).element],["/about",()=>(new n.About).element],["/score",()=>(new r.Score).element],["/settings",()=>(new a.Settings).element]]);t.App=class{constructor(e){this.rootElement=e,this.header=new o.Header,this.pageOutlet=document.createElement("div"),this.pageOutlet.classList.add("page-outlet"),this.rootElement.append(this.header.element),this.rootElement.append(this.pageOutlet)}start(){l.router.subscribe((e=>{const t=c.get(e);if(t){const e=t();this.pageOutlet.innerHTML="",this.pageOutlet.append(e)}})),l.router.subscribe((e=>this.header.selectActiveNavElement(e))),l.router.navigate("/about")}}},7054:(e,t,s)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.About=void 0,s(596);const n=s(8583);class i extends n.BaseComponent{constructor(){super("div",["about"])}}t.About=i},8583:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.BaseComponent=void 0,t.BaseComponent=class{constructor(e="div",t=[]){this.element=document.createElement(e),this.element.classList.add(...t)}}},4977:(e,t,s)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.Card=void 0,s(76);const n=s(8583);class i extends n.BaseComponent{constructor(e){super("div",["card-container"]),this.image=e,this.isFlipped=!0,this.element.innerHTML=`\n      <div class="card">\n        <div class="card__front" style="background-image: url('./images/${e}')"></div>\n        <div class="card__back"></div>\n      </div>\n    `}flipToBack(){return this.isFlipped=!0,this.flip(this.isFlipped)}flipToFront(){return this.isFlipped=!1,this.flip(this.isFlipped)}flip(e=!1){return new Promise((t=>{this.element.classList.toggle("flipped",e),this.element.addEventListener("transitionend",(()=>t()),{once:!0})}))}showSuccess(){this.element.style.setProperty("--pseudo-color","var(--pseudo-color_green)")}showError(){this.element.style.setProperty("--pseudo-color","var(--pseudo-color_red)"),setTimeout((()=>{this.element.style.setProperty("--pseudo-color","transparent")}),500)}}t.Card=i},7610:(e,t,s)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.CardsField=void 0,s(5080);const n=s(8583);class i extends n.BaseComponent{constructor(){super("div",["cards-field"]),this.cards=[]}clear(){this.cards=[],this.element.innerHTML=""}addCards(e){this.cards=e,this.cards.forEach((e=>this.element.append(e.element)))}hideCards(){this.cards.forEach((e=>e.flipToBack()))}}t.CardsField=i},720:(e,t,s)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.appendCongratPopUp=void 0;const n=s(5721);t.appendCongratPopUp=function(){const e=new n.CongratPopUp,t=document.getElementById("app");t&&t.append(e.element),document.body.classList.add("no-scroll"),e.element.style.setProperty("display","flex"),setTimeout((()=>{e.element.style.setProperty("--popup-opacity","1")}),0)}},1460:(e,t,s)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.CongratButton=void 0;const n=s(8583);class i extends n.BaseComponent{constructor(){super("button",["congrat-button"]),this.element.innerText="ok"}}t.CongratButton=i},5721:(e,t,s)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.CongratPopUp=void 0,s(7262);const n=s(3440),i=s(8583),o=s(7381),r=s(1460);class a extends o.PopUp{constructor(){super(),this.button=new r.CongratButton,this.popUp.element.classList.add("pop-up_congrat");const e=new i.BaseComponent("h2",["congrat__heading"]);e.element.innerText="Congratulations, you find all matches!",this.popUp.element.append(e.element),this.popUp.element.append(this.button.element),this.handleButton(),this.handleHiding()}popUpHide(){this.element.style.setProperty("--popup-opacity","0"),setTimeout((()=>{document.body.classList.remove("no-scroll"),this.element.remove()}),300)}handleButton(){this.button.element.addEventListener("click",(()=>{this.popUpHide(),n.router.navigate("/score")}))}handleHiding(){this.element.addEventListener("click",(e=>{null===e.target.closest(".pop-up")&&(this.popUpHide(),n.router.navigate("/score"))}))}}t.CongratPopUp=a},8229:function(e,t,s){var n=this&&this.__awaiter||function(e,t,s,n){return new(s||(s=Promise))((function(i,o){function r(e){try{l(n.next(e))}catch(e){o(e)}}function a(e){try{l(n.throw(e))}catch(e){o(e)}}function l(e){var t;e.done?i(e.value):(t=e.value,t instanceof s?t:new s((function(e){e(t)}))).then(r,a)}l((n=n.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.Game=void 0,s(4336);const i=s(8583),o=s(7610),r=s(4977),a=s(7416),l=s(2610),c=s(9600),d=s(3912),u=s(720),p=s(8119);class h extends i.BaseComponent{constructor(){super("div",["game"]),this.cardsField=new o.CardsField,this.timer=new l.Timer,this.isAnimation=!1,this.gameStartTime=new Date(0),this.cardsAmount=0,this.rightCheckCounter=0,this.wrongCheckCounter=0,this.element.append(this.timer.element),this.element.append(this.cardsField.element),h.loadImages().then((e=>{this.startTimer(),this.startGame(e)}))}static loadImages(){return n(this,void 0,void 0,(function*(){const e=yield fetch("./images.json"),t=yield e.json(),s=c.settingsSingleton.cardsType,n=t.findIndex((e=>e.category===s)),i=t[n];return i.images.map((e=>`${i.category}/${e}`))}))}startGame(e){this.cardsField.clear(),this.cardsAmount=c.settingsSingleton.getDifficulty();const t=e.sort((()=>Math.random()-.5)).slice(0,this.cardsAmount),s=t.concat(t).map((e=>new r.Card(e))).sort((()=>Math.random()-.5));s.forEach((e=>{e.element.addEventListener("click",(()=>this.cardHandler(e)))})),this.cardsField.addCards(s)}startTimer(){let e=29;const t=setInterval((()=>{this.timer.setTime(e),e--}),1e3);setTimeout((()=>{clearInterval(t),this.cardsField.hideCards(),this.gameStartTime=new Date,e=0,this.currentInterval=setInterval((()=>{this.timer.setTime(e),e++}),1e3)}),29e3)}cardHandler(e){return n(this,void 0,void 0,(function*(){if(!this.isAnimation&&!1!==e.isFlipped){if(this.isAnimation=!0,yield e.flipToFront(),!this.activeCard)return this.activeCard=e,void(this.isAnimation=!1);this.activeCard.image!==e.image?(this.wrongCheckCounter++,this.activeCard.showError(),e.showError(),yield a.delay(1e3),yield Promise.all([this.activeCard.flipToBack(),e.flipToBack()])):(this.rightCheckCounter++,this.activeCard.showSuccess(),e.showSuccess(),this.gameEnd()),this.activeCard=void 0,this.isAnimation=!1}}))}gameEnd(){if(this.rightCheckCounter===this.cardsAmount){const e=new Date,t=this.wrongCheckCounter+this.rightCheckCounter,s=p.scoreCount(t,this.wrongCheckCounter,e,this.gameStartTime);d.userService.updateUserScore(s),this.currentInterval&&clearInterval(this.currentInterval),u.appendCongratPopUp()}}}t.Game=h},8119:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.scoreCount=void 0,t.scoreCount=function(e,t,s,n){let i=100*(e-t)-10*(s.getSeconds()-n.getSeconds());return i<0&&(i=0),i}},5804:(e,t,s)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.HeaderButton=void 0,s(6220);const n=s(8583);class i extends n.BaseComponent{constructor(){super("button",["header__button"]),this.element.innerText="register new player"}}t.HeaderButton=i},1366:(e,t,s)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.Header=void 0,s(5528);const n=s(8583),i=s(3440),o=s(5018),r=s(6921),a=s(5804),l=s(9986);class c extends n.BaseComponent{constructor(){super("header",["header"]),this.logo=new o.HeaderLogo,this.nav=new r.HeaderNav,this.button=new a.HeaderButton,this.registerPopUp=new l.RegisterPopUp,this.element.append(this.logo.element),this.element.append(this.nav.element),this.element.append(this.button.element),this.handleNavigation(),this.handleRegistrationButton()}selectActiveNavElement(e){const t=Array.from(this.element.querySelectorAll(".nav__link"));t.forEach((e=>e.classList.remove("nav__link_active")));const s=t.find((t=>function(t){return t.getAttribute("data-route")===e}(t)));s&&s.classList.add("nav__link_active")}handleNavigation(){this.nav.element.addEventListener("click",(e=>{const t=e.target.closest(".nav__link");if(t){const e=t.getAttribute("data-route")||"";i.router.navigate(e)}}))}handleRegistrationButton(){this.button.element.addEventListener("click",(()=>{this.registerPopUp=new l.RegisterPopUp,this.registerPopUp.element.addEventListener("successRegistration",(()=>{this.buttonExchange()}));const e=document.getElementById("app");e&&e.append(this.registerPopUp.element),document.body.classList.add("no-scroll"),this.registerPopUp.element.style.setProperty("display","flex"),setTimeout((()=>{this.registerPopUp.element.style.setProperty("--popup-opacity","1")}),0)}))}buttonExchange(){this.button.element.remove(),this.button=new a.HeaderButton,this.button.element.innerText="Start Game",this.handleStartGameButton(),this.element.append(this.button.element)}handleStartGameButton(){this.button.element.addEventListener("click",(()=>{i.router.navigate("/")}))}}t.Header=c},5018:(e,t,s)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.HeaderLogo=void 0,s(7925);const n=s(8583);class i extends n.BaseComponent{constructor(){super("div",["logo"]),this.element.dataset.route="/",this.element.innerHTML='\n      <p class="logo__text">match</p>\n      <p class="logo__text transparent">match</p>\n    '}}t.HeaderLogo=i},3314:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.linksNames=t.linksList=void 0,t.linksList={about:{name:"about",route:"/about",content:"About Game"},score:{name:"score",route:"/score",content:"Best Score"},settings:{name:"settings",route:"/settings",content:"Game Settings"}},t.linksNames=Object.keys(t.linksList)},2508:(e,t,s)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.NavLink=void 0;const n=s(8583),i=s(3314);class o extends n.BaseComponent{constructor(e){super("div",["nav__link"]);const t=i.linksList[e];this.element.dataset.route=t.route,this.element.innerHTML=`\n      <span class="nav__icon ${t.name}"></span>\n      <p>${null==t?void 0:t.content}</p>\n    `}}t.NavLink=o},6921:(e,t,s)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.HeaderNav=void 0,s(2051);const n=s(8583),i=s(2508),o=s(3314);class r extends n.BaseComponent{constructor(){super("nav",["nav"]);const e=Object.values(o.linksList);this.navLinks=[],e.forEach((e=>{const t=new i.NavLink(e.name);this.navLinks.push(t),this.element.append(t.element)}))}}t.HeaderNav=r},7381:(e,t,s)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.PopUp=void 0,s(616);const n=s(8583);class i extends n.BaseComponent{constructor(){super("div",["pop-up__wrapper"]),this.popUp=new n.BaseComponent("div",["pop-up"]),this.element.append(this.popUp.element)}}t.PopUp=i},8726:(e,t,s)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.RegisterButton=void 0;const n=s(8583),i={addUser:"add user",cancel:"cancel"};class o extends n.BaseComponent{constructor(e){super("button",["register-button",`register-button_${e}`]),this.element.innerText=i[e]}}t.RegisterButton=o},9986:(e,t,s)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.RegisterPopUp=void 0,s(9160);const n=s(8583),i=s(7381),o=s(8726),r=s(9013),a=s(6373),l=s(6036),c=s(2771),d=s(3912),u=s(8328);class p extends i.PopUp{constructor(){super(),this.firstNameInput=new r.RegisterInput("firstName"),this.lastNameInput=new r.RegisterInput("lastName"),this.emailInput=new r.RegisterInput("email"),this.popUp.element.classList.add("pop-up_register-form");const e=new n.BaseComponent("h2",["register__heading"]);e.element.innerText="Register new Player",this.popUp.element.append(e.element),this.firstNameInput.element.addEventListener("input",(()=>{const e=this.firstNameInput.element.value;this.firstNameInput.validation(a.isValidFirstname(e))})),this.popUp.element.append(this.firstNameInput.element),this.lastNameInput.element.addEventListener("input",(()=>{const e=this.lastNameInput.element.value;this.lastNameInput.validation(l.isValidLastname(e))})),this.popUp.element.append(this.lastNameInput.element),this.emailInput.element.addEventListener("input",(()=>{const e=this.emailInput.element.value;this.emailInput.validation(c.isValidEmail(e))})),this.popUp.element.append(this.emailInput.element);const t=new n.BaseComponent("div",["register__buttons"]);this.addButton=new o.RegisterButton("addUser"),t.element.append(this.addButton.element),this.cancelButton=new o.RegisterButton("cancel"),t.element.append(this.cancelButton.element),this.popUp.element.append(t.element),this.handleAddButton(),this.handleCancelButton(),this.handleHiding()}popUpHide(){this.element.style.setProperty("--popup-opacity","0"),setTimeout((()=>{document.body.classList.remove("no-scroll"),this.element.remove()}),300)}handleCancelButton(){this.cancelButton.element.addEventListener("click",(()=>{this.popUpHide()}))}handleAddButton(){this.addButton.element.addEventListener("mousedown",(()=>{const e=this.firstNameInput.isValid,t=this.lastNameInput.isValid,s=this.emailInput.isValid;if(e&&t&&s){const e=this.firstNameInput.element.value,t=this.lastNameInput.element.value,s=this.emailInput.element.value;d.userService.createUser(e,t,s),this.element.dispatchEvent(u.registrationEvent),this.popUpHide()}else this.addButton.element.classList.add("register-button_denied"),setTimeout((()=>{this.addButton.element.classList.remove("register-button_denied")}),750)}))}handleHiding(){this.element.addEventListener("click",(e=>{null===e.target.closest(".pop-up")&&this.popUpHide()}))}}t.RegisterPopUp=p},9013:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.RegisterInput=void 0;const s={firstName:"First Name",lastName:"Last Name",email:"E-mail"};t.RegisterInput=class{constructor(e){this.isValid=!1,this.element=document.createElement("input"),this.element.classList.add("register-input",`register-input_${e}`),this.element.setAttribute("type","text"),this.element.setAttribute("title","\n      - Field couldn't be empty.\n      - Field couldn't contain only numbers.\n      - Field couldn't contain next symbols (~ ! @ # $ % * () _ — + = | : ; \" ' ` < > , . ? / ^).\n      "),"email"===e&&(this.element.setAttribute("type","email"),this.element.setAttribute("title","\n        - Field couldn't be empty.\n        - Email should be valid by terms of RFC\n        ")),this.element.setAttribute("id",`register-input_${e}`),this.element.setAttribute("name",`${e}`),this.element.setAttribute("placeholder",`${s[e]}`)}validation(e){this.isValid=e,e?this.showValid():this.showUnvalid()}showValid(){this.element.style.setProperty("--validation-color","var(--validation-color-accept)")}showUnvalid(){this.element.style.setProperty("--validation-color","var(--validation-color-reject)")}}},8328:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.registrationEvent=void 0,t.registrationEvent=new Event("successRegistration")},2295:(e,t,s)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.Score=void 0,s(6003);const n=s(8583),i=s(2805),o=s(3912),r=s(5941);class a extends n.BaseComponent{constructor(){super("div",["score-board"]),this.element.innerHTML='\n    <h2 class="score__heading">Best players</h2>\n    ',o.userService.getTopPlayers().then((e=>{void 0===e[0]&&(o.userService.userRepo.create(r.fakeUser1),e.push(r.fakeUser1),o.userService.userRepo.create(r.fakeUser2),e.push(r.fakeUser2),o.userService.userRepo.create(r.fakeUser3),e.push(r.fakeUser3)),e.forEach((e=>{const t=new i.ScoreElement(e);this.element.append(t.element)}))}))}}t.Score=a},2805:(e,t,s)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.ScoreElement=void 0;const n=s(8583);class i extends n.BaseComponent{constructor(e){super("div",["score-element"]),this.element.innerHTML=`\n      <div class="score__info">\n        <div class="score__user">\n          <div class="score__username"><p>${e.firstName} ${e.lastName}</p></div>\n          <div class="score__email"><p>${e.email}</p></div>\n        </div>\n      </div>\n      <div class="score__userscore">\n        <p>Score: <span class="score__value">${e.score}</span></p>\n      </div>\n    `}}t.ScoreElement=i},9581:function(e,t,s){var n=this&&this.__awaiter||function(e,t,s,n){return new(s||(s=Promise))((function(i,o){function r(e){try{l(n.next(e))}catch(e){o(e)}}function a(e){try{l(n.throw(e))}catch(e){o(e)}}function l(e){var t;e.done?i(e.value):(t=e.value,t instanceof s?t:new s((function(e){e(t)}))).then(r,a)}l((n=n.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.CardsTypeInput=void 0;const i=s(9600),o=s(7524);class r extends o.SettingsInput{constructor(){super(),this.element.setAttribute("name","card-type-input"),this.element.setAttribute("id","card-type-input"),r.getTypes().then((e=>{e.forEach((e=>{const t=document.createElement("option");t.classList.add("settings-option"),t.setAttribute("value",e),t.innerText=e,this.element.append(t)}))})),this.getValue()}static getTypes(){return n(this,void 0,void 0,(function*(){const e=yield fetch("./images.json"),t=yield e.json(),s=[];return t.forEach((e=>s.push(e.category))),s}))}getValue(){i.settingsSingleton.cardsType&&(this.element.value=i.settingsSingleton.cardsType)}setValue(){const{value:e}=this.element;e&&(i.settingsSingleton.cardsType=e)}}t.CardsTypeInput=r},3325:(e,t,s)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.GameDifficultyInput=void 0;const n=s(9600),i=s(7524),o=["4x4","6x6","8x8"];class r extends i.SettingsInput{constructor(){super(),this.element.setAttribute("name","game-difficulty-input"),this.element.setAttribute("id","game-difficulty-input"),o.forEach((e=>{const t=document.createElement("option");t.classList.add("settings-option"),t.classList.add("settings-option_difficulty"),t.setAttribute("value",e),t.innerText=e,this.element.append(t)})),this.getValue(),this.setValue()}getValue(){n.settingsSingleton.difficulty&&(this.element.value=n.settingsSingleton.difficulty)}setValue(){const{value:e}=this.element;e&&(n.settingsSingleton.difficulty=e),document.body.style.setProperty("--cards-multiplier",`var(--game-difficulty__${e})`)}}t.GameDifficultyInput=r},7524:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.SettingsInput=void 0,t.SettingsInput=class{constructor(){this.element=document.createElement("select"),this.element.classList.add("settings__input")}}},8831:(e,t,s)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.Settings=void 0,s(6148);const n=s(8583),i=s(9581),o=s(3325);class r extends n.BaseComponent{constructor(){super("div",["settings-board"]),this.cardsTypeInput=new i.CardsTypeInput,this.gameDifficultyInput=new o.GameDifficultyInput;const e=new n.BaseComponent("div",["settings__cards-type"]);e.element.innerHTML='\n      <h3 class="settings__input-heading">Game cards type:</h3>\n    ',this.cardsTypeInput.element.addEventListener("change",(()=>{this.cardsTypeInput.setValue()})),e.element.append(this.cardsTypeInput.element),this.element.append(e.element);const t=new n.BaseComponent("div",["settings__game-difficulty"]);t.element.innerHTML='\n      <h3 class="settings__input-heading">Difficulty:</h3>\n    ',this.gameDifficultyInput.element.addEventListener("change",(()=>{this.gameDifficultyInput.setValue()})),t.element.append(this.gameDifficultyInput.element),this.element.append(t.element)}}t.Settings=r},2610:(e,t,s)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.Timer=void 0,s(2580);const n=s(8583);function i(e){return e<10?`0${e}`:`${e}`}class o extends n.BaseComponent{constructor(){super("div",["timer"]),this.setTime(30)}setTime(e){const t=i(Math.floor(e/60)),s=i(e%60);this.element.innerText=`${t}:${s}`}}t.Timer=o},464:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.User=void 0,t.User=class{constructor(e,t,s){this.firstName=e,this.lastName=t,this.email=s,this.score=0,this.id=this.firstName+this.lastName+new Date}}},3440:(e,t,s)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.router=void 0;const n=s(9458);t.router=new n.Router},9458:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.Router=void 0,t.Router=class{constructor(){this.state=document.location.pathname,this.subscribers=[],window.addEventListener("popstate",(()=>{this.notify(document.location.pathname)}))}navigate(e){this.state!==e&&(window.history.pushState(null,"",e),this.notify(e))}subscribe(e){return e(this.state),this.subscribers.push(e),()=>{const t=this.subscribers.indexOf(e);this.subscribers.splice(t,1)}}getState(){return this.state}notify(e){e!==this.state&&(this.state=e,this.subscribers.forEach((e=>e(this.state))))}}},5312:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.regExp=void 0,t.regExp=/^[^0-9][^(~!@#$%*&()_—+=|:;"'`<>,.?\\/\\^\s)]{1,30}$/},2771:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.isValidEmail=void 0;const s=/^(([^<>()[\]\\.,;:\s@"]+(\.[^<>()[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/;t.isValidEmail=function(e){return!!s.test(e)}},6373:(e,t,s)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.isValidFirstname=void 0;const n=s(5312);t.isValidFirstname=function(e){return!!n.regExp.test(e)}},6036:(e,t,s)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.isValidLastname=void 0;const n=s(5312);t.isValidLastname=function(e){return!!n.regExp.test(e)}},9600:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.settingsSingleton=void 0,t.settingsSingleton={difficulty:"4x4",cardsType:"unsorted",getDifficulty(){const e=this.difficulty;return"8x8"===e?32:"6x6"===e?18:8}}},5941:(e,t,s)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.fakeUser3=t.fakeUser2=t.fakeUser1=void 0;const n=s(464),i=new n.User("Yauheni","Smirnou","YauSmirn@yuppie.com");t.fakeUser1=i,i.score=1e3;const o=new n.User("Yakau","Hrigorieu","YariGg@piecherry.com");t.fakeUser2=o,o.score=500;const r=new n.User("Martin","Cat","MartinCat@meow.pour");t.fakeUser3=r,r.score=300},3912:(e,t,s)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.userService=void 0;const n=s(4141);t.userService=new n.UserService},7787:function(e,t){var s=this&&this.__awaiter||function(e,t,s,n){return new(s||(s=Promise))((function(i,o){function r(e){try{l(n.next(e))}catch(e){o(e)}}function a(e){try{l(n.throw(e))}catch(e){o(e)}}function l(e){var t;e.done?i(e.value):(t=e.value,t instanceof s?t:new s((function(e){e(t)}))).then(r,a)}l((n=n.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.UserRepository=void 0,t.UserRepository=class{constructor(){this.dbName="Eugene-Smirnov",this.storeName="users";const e=indexedDB.open(this.dbName);e.onsuccess=e=>{this.db=e.target.result},e.onupgradeneeded=e=>{const t=e.target.result;t.objectStoreNames.contains(this.storeName)||t.createObjectStore(this.storeName,{keyPath:"id"})}}create(e){return new Promise(((t,s)=>{var n;const i=null===(n=this.db)||void 0===n?void 0:n.transaction(this.storeName,"readwrite"),o=null==i?void 0:i.objectStore(this.storeName);o?o.add(e).onsuccess=()=>{t(e)}:s()}))}getAllUsers(){return s(this,void 0,void 0,(function*(){return new Promise(((e,t)=>{var s;const n=null===(s=this.db)||void 0===s?void 0:s.transaction(this.storeName,"readwrite"),i=null==n?void 0:n.objectStore(this.storeName);if(i){const t=i.getAll();t.onsuccess=()=>{e(t.result)}}else t()}))}))}updateUserScore(e){var t;const s=null===(t=this.db)||void 0===t?void 0:t.transaction(this.storeName,"readwrite"),n=null==s?void 0:s.objectStore(this.storeName);if(n){const t=n.openCursor();t.onsuccess=()=>{const s=t.result;if(s){const{key:t}=s;if(t===e.id){const{value:t}=s;t.score=e.score,s.update(t).onsuccess=()=>{console.log(`${e.firstName} ${e.lastName} updated with score: ${e.score}`)}}s.continue()}}}}}},4141:function(e,t,s){var n=this&&this.__awaiter||function(e,t,s,n){return new(s||(s=Promise))((function(i,o){function r(e){try{l(n.next(e))}catch(e){o(e)}}function a(e){try{l(n.throw(e))}catch(e){o(e)}}function l(e){var t;e.done?i(e.value):(t=e.value,t instanceof s?t:new s((function(e){e(t)}))).then(r,a)}l((n=n.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.UserService=void 0;const i=s(464),o=s(7787);t.UserService=class{constructor(){this.loggedUser=null,this.userRepo=new o.UserRepository}createUser(e="",t="",s=""){const n=new i.User(e,t,s);this.loggedUser=n,this.userRepo.create(n)}updateUserScore(e){this.loggedUser&&(this.loggedUser.score=e,this.userRepo.updateUserScore(this.loggedUser))}getTopPlayers(){return n(this,void 0,void 0,(function*(){return(yield this.userRepo.getAllUsers()).sort(((e,t)=>t.score-e.score)).slice(0,10)}))}}},7416:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.delay=void 0,t.delay=function(e){return new Promise((t=>{setTimeout(t,e)}))}}},t={};function s(n){var i=t[n];if(void 0!==i)return i.exports;var o=t[n]={exports:{}};return e[n].call(o.exports,o,o.exports,s),o.exports}s.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},(()=>{s(8387);const e=s(6752);window.onload=()=>{const t=document.getElementById("app");if(!t)throw Error("App root element not found");new e.App(t).start()}})()})();